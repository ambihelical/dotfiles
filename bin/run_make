#!/bin/bash
# To be used as vim makeprg
# 
# Trys to find a Makefile or similiar in priority order.
# Runs it.

# Try to find a script called make.sh and then execute it
if [ -e "./make.sh" ]; then
   ./make.sh
elif [ -e "./build/make.sh" ]; then
   cd build
   ./make.sh
elif [ -e "./Makefile" ]; then
   make -j8 -f Makefile
elif [ -e "./build/Makefile" ]; then
   cd build
   make -j8 -f Makefile
elif [ -e "./b/Makefile" ]; then
   cd b
   make -j8 -f Makefile
elif [ -e "./pmbuild/Makefile" ]; then
   cd pmbuild
   make -j8 -f Makefile
fi

