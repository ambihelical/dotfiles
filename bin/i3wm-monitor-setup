#!/bin/bash

# local configuration for i3
source /etc/os-release
linux=$ID

# by default disable screen locking
lockminutes=0
offminutes=0

# use autorandr to detect monitors in use
#
# Once monitor setup is good, use autorandr --save name to save it
# autorandr --list to list all profiles
# Some xrandr configurations in use for convenience
#
# dell:
# xrandr --output eDP-1 --primary --pos 0x0 --mode 1920x1200 --dpi 144 --output DP-1-3 --mode 3840x2160 --pos 1920x-969
# hum fedora:
# xrandr --output HDMI-1 --primary --pos 0x0 --mode 1920x1080 --dpi 80 --output DVI-I-1 --rotate left --pos 1920x-420
# hum ubuntu:
# xrandr --output HDMI-0 --primary --pos 0x0 --mode 1920x1080 --dpi 80 --output DVI-I-1 --rotate left --pos 1920x-420

autorandr -c

# screen locking
killall -q xautolock
if [ ${lockminutes} -gt 0 ]; then
	xautolock -detectsleep -time ${lockminutes} -locker '~/bin/i3wm-screen-lock' -notify 15 -notifier 'notify-send "Screen lock will occur in 15 seconds"' &
else
	 echo "Auto screen lock disabled"
fi
xset -display ${DISPLAY} dpms 0 0 $((offminutes * 60))
xset -display ${DISPLAY} s noblank
xset -display ${DISPLAY} s off


