#!/bin/bash

if [ $# != 0 ]; then
	echo "No arguments needed"
	exit 1
fi

# more error checking
set -euo pipefail

# exclude rust target directories
# delete is needed for git repos
FLAGS="--archive --verbose --delete --exclude target/ --exclude doc/out/ --exclude archive/ --exclude dotfiles/"
OTHER=/run/media/eric/fedora_localhost-live/${HOME}

if [ ! -d ${OTHER} ]; then
    echo "Can't find Backup parent ${OTHER}, is drive mounted?"
    exit -1
fi

DEST=${OTHER}/Backup/
mkdir -p ${DEST}

SRC=${HOME}/dev/
rsync ${FLAGS} ${SRC} ${DEST}
